<bindings   xmlns="http://www.mozilla.org/xbl"
            xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
            xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
            xmlns:xbl="http://www.mozilla.org/xbl"
            xmlns:html="http://www.w3.org/1999/xhtml"
            xmlns:change="http://www.rbs-change.eu/change-4.2/taglib/phptal">

    <binding id="wSitemapToolbar" extends="layout.wBlockToolbar#wBaseBlockToolbar">

        <implementation>

            <method name="onInitialize">
                <body><![CDATA[
                    var _func = "onInitialize";
                    var _args = [];
                    try
                    {
                        if (this.getBlockAttribute('display', 'column'))
                        {
                            this.getElementById("column-button").checked = true;
                        }
                        else
                        {
                            this.getElementById("column-button").checked = false;
                        }
                    }
                    catch (e)
                    {
                        this.error(_func, _args, e);
                    }
                ]]></body>
            </method>

            <method name="onUpdate">
                <body><![CDATA[
                    var _func = "onUpdate";
                    var _args = [];
                    try
                    {
                        if (this.getBlockAttribute('display', 'column'))
                        {
                            this.getElementById("column-button").checked = true;
                        }
                        else
                        {
                            this.getElementById("column-button").checked = false;
                        }
                    }
                    catch (e)
                    {
                        this.error(_func, _args, e);
                    }
                ]]></body>
            </method>

            <method name="updateColumn">
                <body><![CDATA[
                    var _func = "updateColumn";
                    var _args = [];
                    try
                    {
                        this.setBlockAttribute('display', 'column', !this.getElementById("column-button").checked);
                        this.refreshBlock();
                    }
                    catch (e)
                    {
                        this.error(_func, _args, e);
                    }
                ]]></body>
            </method>

        </implementation>

        <xbl:content xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul" xmlns:xbl="http://www.mozilla.org/xbl" xmlns:html="http://www.w3.org/1999/xhtml" orient="vertical">
            <toolbar anonid="toolbar" flex="1">
                <toolbarbutton anonid="column-button" type="checkbox" image="{HttpHost}/icons/small/table.png" label="&modules.website.bo.general.SiteMapColumn;" oncommand="updateColumn();" />
            </toolbar>
        </xbl:content>
    </binding>
</bindings>