<?xml version="1.0" encoding="UTF-8"?>
<panel>
	<section labeli18n="modules.uixul.bo.doceditor.fieldsgroup.Title">
		<field name="label" />
		<field name="account" />
		<field name="langs" type="checklist" />
	</section>
	<section labeli18n="modules.website.bo.doceditor.fieldsgroup.Specific-properties" class="marker-specific-properties">
		<field name="specificPropertiesJSON" />
	</section>
	<xul>
		<javascript>
			<constructor><![CDATA[
				this.extendMethodBefore("fireInitializeComplete", this.initializeCompletePageExtend);
				document.getElementById('website_marker_specificPropertiesJSON_label').setAttribute('collapsed', 'true');
			]]></constructor>
			
			<method name="extendMethodBefore">
				<parameter name="methodName" />
				<parameter name="memberMethod" />
				<body><![CDATA[
					var base = this[methodName];
					var me = this;
					this[methodName] = function() {memberMethod.apply(me, arguments);base.apply(me, arguments);}				
				]]></body>
			</method>
			
			<method name="initializeCompletePageExtend">
				<parameter name="result" />
				<body><![CDATA[
					// Generate langs list.
					var editor = this.documentEditor;
					try
					{
						this.fields.langs.replaceItems({folderId: editor.documentid});
					}
					catch (e)
					{
						wCore.error("marker.propertiespanel.fireInitializeCompleteExtend", [], e);
					}
					
					// Handle marker type.
					var section = this.getElementByAnonId('field_specificPropertiesJSON');
					section.setAttribute('fieldtype', 'marker'+result.contents.markerType+'properties');
				]]></body>
			</method>
		</javascript>
	</xul>
</panel>