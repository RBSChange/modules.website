<?xml version="1.0" encoding="UTF-8"?>
<panel>
	<section labeli18n="m.website.document.page.titleinformations">
		<field name="navigationtitle" />
		<field name="defaultContent" type="dropdownlist" required="true" label="Gabarit de la page" nocache="true" />
	</section>
	<xul>
		<javascript>
			<constructor><![CDATA[
				this.extendMethod('fireInitializeComplete', this.fireInitializeCompleteExtend);
			]]></constructor>
			<method name="fireInitializeCompleteExtend">
				<parameter name="result" />
				<body><![CDATA[
					try
					{		
						var pid = this.documentEditor.parentid;
						var field = this.fields.defaultContent;
						wCore.debug('parentid: '+ pid);
						field.replaceItems({parentid: pid,cmpref:"modules_website/templates"});
					}
					catch (e)
					{
						wCore.error("page.createpanel.fireInitializeCompleteExtend", [result], e);
					}
				]]></body>
			</method>
			<method name="preparePropertiesValues">
				<parameter name="values" />
				<body><![CDATA[
					values.label = values.navigationtitle;
					values.metatitle = values.navigationtitle;
					values.documentproperties += ',label,metatitle';
				]]></body>
			</method>
		</javascript>
	</xul>
</panel>